{"ast":null,"code":"var _jsxFileName = \"/Users/boris/sei-bromeliad/projects/project3/Ecommerce-Website/ecommerce-website/src/pages/Editpage.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport './Editpage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet baseUrl = 'http://localhost:3003';\n\nclass Editpage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getItems = () => {\n      fetch(baseUrl).then(res => {\n        if (res.status === 200) {\n          return res.json();\n        } else {\n          return [];\n        }\n      }).then(data => {\n        console.log(data);\n        this.setState({\n          items: data\n        });\n      });\n    };\n\n    this.addItems = newItem => {\n      const copyItems = [...this.state.items];\n      copyItems.push(newItem);\n      this.setState({\n        items: copyItems\n      });\n    };\n\n    this.deleteItem = id => {\n      fetch(baseUrl + '/' + id, {\n        method: 'DELETE'\n      }).then(res => {\n        const findIndex = this.state.items.findIndex(item => item._id === id);\n        const copyItems = [...this.state.items];\n        copyItems.splice(findIndex, 1);\n        this.setState({\n          items: copyItems\n        });\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const url = baseUrl + '/' + this.state.itemToBeEdited._id;\n      console.log(this.state.itemToBeEdited._id);\n      console.log(url);\n\n      try {\n        const response = await fetch(url, {\n          method: 'PUT',\n          body: JSON.stringify({\n            name: e.target.name.value,\n            description: e.target.description.value,\n            image: e.target.image.value,\n            price: e.target.price.value,\n            size: e.target.size.value\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.status === 200) {\n          const updatedItem = await response.json();\n          const findIndex = this.state.items.findIndex(item => item._id === updatedItem._id);\n          const copyItems = [...this.state.items];\n          copyItems[findIndex] = updatedItem;\n          this.setState({\n            items: copyItems,\n            modalOpen: false\n          });\n        }\n      } catch (err) {\n        console.log('Error => ', err);\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.showEditForm = item => {\n      this.setState({\n        modalOpen: true,\n        name: item.name,\n        description: item.description,\n        image: item.image,\n        size: item.size,\n        price: item.price,\n        itemToBeEdited: item\n      });\n    };\n\n    this.state = {\n      items: [],\n      modalOpen: false,\n      itemToBeEdited: {},\n      description: '',\n      name: '',\n      image: '',\n      price: '',\n      size: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"main\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-page\",\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"product-list\",\n            children: this.state.items.map((item, i) => {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"product\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"product-name\",\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      to: \"/show/\" + item._id,\n                      children: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"product-description\",\n                    children: item.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"product-price\",\n                    children: item.price\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"product-image\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: item.image,\n                      alt: \"item\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 143,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"product-size\",\n                    children: item.size\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => this.deleteItem(item._id),\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    onClick: () => {\n                      this.showEditForm(item);\n                    },\n                    children: \"Show Edit Form\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 25\n                }, this)\n              }, item._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this), this.state.modalOpen && /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"editForm\",\n            onSubmit: this.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Name: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"name\",\n              value: this.state.name,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 18\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 92\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Description: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"description\",\n              value: this.state.description,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Image: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"image\",\n              value: this.state.image,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Size: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"size\",\n              value: this.state.size,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Price: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"price\",\n              value: this.state.price,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"\",\n              children: \"update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"footer\",\n        children: \"Group 6, SEI-Bromeliad.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Editpage;","map":{"version":3,"sources":["/Users/boris/sei-bromeliad/projects/project3/Ecommerce-Website/ecommerce-website/src/pages/Editpage.js"],"names":["React","Component","Link","baseUrl","Editpage","constructor","props","getItems","fetch","then","res","status","json","data","console","log","setState","items","addItems","newItem","copyItems","state","push","deleteItem","id","method","findIndex","item","_id","splice","handleSubmit","e","preventDefault","url","itemToBeEdited","response","body","JSON","stringify","name","target","value","description","image","price","size","headers","updatedItem","modalOpen","err","handleChange","showEditForm","componentDidMount","render","map","i"],"mappings":"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","sourcesContent":["import React, { Component} from 'react'\nimport {Link} from 'react-router-dom'\nimport './Editpage.css'\n\nlet baseUrl = 'http://localhost:3003'\n\nclass Editpage extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      items: [],\n      modalOpen: false,\n      itemToBeEdited:{},\n      description:'',\n      name: '',\n      image: '',\n      price: '',\n      size: ''\n    }\n  }\n\n  getItems = () => {\n    fetch(baseUrl)\n    .then(res => {\n      if(res.status === 200) {\n        return res.json()\n      } else {\n        return []\n      }\n    }).then(data => {\n      console.log(data)\n      this.setState({ items: data })\n    })\n  }\n\n  addItems = (newItem) => {\n    const copyItems = [...this.state.items]\n    copyItems.push(newItem)\n    this.setState({\n      items:copyItems\n    })\n  }\n\n  deleteItem = (id) => {\n    fetch(baseUrl+'/'+id,{\n      method: 'DELETE'\n    }).then(res => {\n      const findIndex = this.state.items.findIndex(item => item._id === id)\n      const copyItems = [...this.state.items]\n      copyItems.splice(findIndex, 1)\n      this.setState({\n        items: copyItems\n      })\n    })\n  }\n\n  handleSubmit = async (e) => {\n    e.preventDefault()\n    const url = baseUrl + '/' + this.state.itemToBeEdited._id\n    console.log(this.state.itemToBeEdited._id)\n    console.log(url)\n    try{\n      const response = await fetch( url , {\n        method: 'PUT',\n        body: JSON.stringify({\n          name: e.target.name.value,\n          description: e.target.description.value,\n          image: e.target.image.value,\n          price: e.target.price.value,\n          size: e.target.size.value\n        }),\n        headers: {\n          'Content-Type' : 'application/json'\n        },\n\n      })\n\n      if (response.status === 200){\n        const updatedItem = await response.json()\n        const findIndex = this.state.items.findIndex(item => item._id === updatedItem._id)\n        const copyItems = [...this.state.items]\n        copyItems[findIndex] = updatedItem\n        this.setState({\n          items: copyItems,\n          modalOpen:false\n        })\n      }\n    }\n    catch(err){\n      console.log('Error => ', err);\n    }\n  }\n\n handleChange = (e)=>{\n   this.setState({\n     [e.target.name]: e.target.value\n   })\n }\n\n  showEditForm = (item)=>{\n    this.setState({\n      modalOpen:true,\n      name: item.name,\n      description: item.description,\n      image: item.image,\n      size: item.size,\n      price: item.price,\n      itemToBeEdited: item\n    })\n  }\n  componentDidMount() {\n    this.getItems()\n  }\n\n  render() {\n    return (\n        <div>\n        <main className=\"main\">\n            <div className=\"product-page\">\n                <ul className=\"product-list\">\n                { this.state.items.map((item, i) => {\n                return (\n                    <li key={item._id}>\n                        <div className=\"product\">\n\n                            <div className=\"product-name\">\n                                <Link to={\"/show/\" + item._id}>\n                                    {item.name}\n                                </Link>\n                            </div>\n\n                            <div className=\"product-description\">\n                                {item.description}\n                            </div>\n\n                            <div className=\"product-price\">\n                                {item.price}\n                            </div>\n\n                            <div className=\"product-image\">\n                                <img src={item.image} alt=\"item\"/>\n                            </div>\n\n                            <div className=\"product-size\">\n                                {item.size}\n                            </div>\n                            <button onClick={() => this.deleteItem(item._id)}>Delete</button>\n                            <div onClick={() => { this.showEditForm(item)}}>Show Edit Form</div>\n                        </div>\n                    </li>\n                    )\n                  })\n                }\n                </ul>\n                {\n               this.state.modalOpen &&\n\n               <form className=\"editForm\" onSubmit={this.handleSubmit}>\n                 <label>Name: </label>\n                 <input name=\"name\" value={this.state.name} onChange={this.handleChange}/> <br/>\n\n                 <label>Description: </label>\n                 <input name=\"description\" value={this.state.description} onChange={this.handleChange}/>\n\n                 <label>Image: </label>\n                 <input name=\"image\" value={this.state.image} onChange={this.handleChange}/>\n\n                 <label>Size: </label>\n                 <input name=\"size\" value={this.state.size} onChange={this.handleChange}/>\n\n                 <label>Price: </label>\n                 <input name=\"price\" value={this.state.price} onChange={this.handleChange}/>\n\n                 <button type=\"\">update</button>\n\n               </form>\n             }\n            </div>\n        </main>\n        <footer className=\"footer\">\n            Group 6, SEI-Bromeliad.\n        </footer>\n    </div>\n\n    );\n  }\n}\n\n\nexport default Editpage;"]},"metadata":{},"sourceType":"module"}